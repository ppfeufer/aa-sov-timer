$(document).ready(()=>{"use strict";const r=$(".aa-sovtimer-timers-total"),l=$(".aa-sovtimer-timers-upcoming"),c=$(".aa-sovtimer-timers-active"),e=a=>{let t="",e="aa-sovtimer-remaining";a<0?(e+=" aa-sovtimer-timer-elapsed",t="-",a=Math.abs(a),a++):a--;const n=Math.floor(a/86400);let i=Math.floor(a/3600)%24,s=Math.floor(a/60)%60,m=Math.floor(a)%60;return i<10&&(i="0"+i),s<10&&(s="0"+s),m<10&&(m="0"+m),{countdown:`<span class="${e}">${t}${n}d ${i}h ${s}m ${m}s</span>`,remainingTimeInSeconds:t+a}},n=$(".aa-sovtimer-campaigns").DataTable({ajax:{url:aaSovtimerSettings.url.ajaxUpdate,dataSrc:"",cache:!1},columns:[{data:"event_type"},{data:"solar_system_name_html"},{data:"constellation_name_html"},{data:"region_name_html"},{data:"defender_name_html"},{data:"adm"},{data:"start_time",render:a=>moment(a).utc().format(aaSovtimerSettings.dateformat)},{data:"remaining_time"},{data:"campaign_progress"},{data:"remaining_time_in_seconds"},{data:"solar_system_name"},{data:"constellation_name"},{data:"region_name"},{data:"defender_name"},{data:"active_campaign"}],columnDefs:[{visible:!1,targets:[9,10,11,12,13,14]}],order:[[6,"asc"]],filterDropDown:{columns:[{idx:0},{idx:10,title:aaSovtimerSettings.translations.system},{idx:11,title:aaSovtimerSettings.translations.constellation},{idx:12,title:aaSovtimerSettings.translations.region},{idx:13,title:aaSovtimerSettings.translations.owner},{idx:14,title:aaSovtimerSettings.translations.activeCampaign}],autoSize:!1,bootstrap:!0,bootstrap_version:5},createdRow:(a,t)=>{const e=r.html(),n=parseInt(e)+1;if(r.html(n),t.active_campaign===aaSovtimerSettings.translations.no&&t.remaining_time_in_seconds<=14400){$(a).addClass("aa-sovtimer-upcoming-campaign");const i=l.html(),s=parseInt(i)+1;l.html(s)}if(t.active_campaign===aaSovtimerSettings.translations.yes){$(a).addClass("aa-sovtimer-active-campaign");const m=c.html(),o=parseInt(m)+1;c.html(o)}},paging:!1});setInterval(()=>{n.ajax.reload(a=>{r.html("0"),l.html("0"),c.html("0"),$.each(a,(a,t)=>{const e=r.html(),n=parseInt(e)+1;if(r.html(n),t.active_campaign===aaSovtimerSettings.translations.no&&t.remaining_time_in_seconds<=14400){const i=l.html(),s=parseInt(i)+1;l.html(s)}if(t.active_campaign===aaSovtimerSettings.translations.yes){const m=c.html(),o=parseInt(m)+1;c.html(o)}})})},3e4),setInterval(()=>{n.rows().every(function(){const a=this.data(),t=e(a.remaining_time_in_seconds);a.remaining_time_in_seconds=t.remainingTimeInSeconds,a.remaining_time=t.countdown,n.row(this).data(a)})},1e3)});
//# sourceMappingURL=aa-sov-timer.min.js.map