$(document).ready(()=>{'use strict';let a=sovtimerJsSettingsDefaults;'undefined'!=typeof sovtimerJsSettingsOverride&&(a=objectDeepMerge(sovtimerJsSettingsDefaults,sovtimerJsSettingsOverride));const t=$('.aa-sovtimer-campaigns-total'),e=$('.aa-sovtimer-campaigns-upcoming'),n=$('.aa-sovtimer-campaigns-active'),i=a=>{let t='',e='aa-sovtimer-remaining';a<0?(e+=' aa-sovtimer-timer-elapsed',t='-',a=Math.abs(a),a++):a--;const n=Math.floor(a/86400);let i=Math.floor(a/3600)%24,r=Math.floor(a/60)%60,s=Math.floor(a)%60;return i<10&&(i='0'+i),r<10&&(r='0'+r),s<10&&(s='0'+s),{countdown:`<span class="${e}">${t}${n}d ${i}h ${r}m ${s}s</span>`,remainingTimeInSeconds:t+a}},r=$('.aa-sovtimer-campaigns');fetchGet({url:a.url.ajaxUpdate}).then(i=>{i&&r.DataTable({language:a.dataTables.language,data:i,columns:[{data:'event_type'},{data:'solar_system_name_html'},{data:'constellation_name_html'},{data:'region_name_html'},{data:'defender_name_html'},{data:'adm'},{data:'start_time',render:{_:t=>null===t?'':moment(t).utc().format(a.datetimeFormat.datetimeLong),sort:a=>null===a?'':a}},{data:'remaining_time'},{data:'campaign_progress'},{data:'remaining_time_in_seconds'},{data:'solar_system_name'},{data:'constellation_name'},{data:'region_name'},{data:'defender_name'},{data:'active_campaign'}],columnDefs:[{visible:!1,targets:[0,9,10,11,12,13,14]},{width:'150px',targets:[8]}],order:[[6,'asc']],filterDropDown:{columns:[{idx:10,title:a.translation.dtFilter.system},{idx:11,title:a.translation.dtFilter.constellation},{idx:12,title:a.translation.dtFilter.region},{idx:13,title:a.translation.dtFilter.owner},{idx:14,title:a.translation.dtFilter.activeCampaign}],autoSize:!1,bootstrap:!0,bootstrap_version:5},createdRow:(i,r)=>{const s=t.html(),o=parseInt(s)+1;if(t.html(o),r.active_campaign===a.translation.no&&r.remaining_time_in_seconds<=a.upcomingTimerThreshold){$(i).addClass('aa-sovtimer-upcoming-campaign');const a=e.html(),t=parseInt(a)+1;e.html(t)}if(r.active_campaign===a.translation.yes){$(i).addClass('aa-sovtimer-active-campaign');const a=n.html(),t=parseInt(a)+1;n.html(t)}},paging:!1})}).catch(a=>{console.error('Error fetching campaign data:',a)}),setInterval(()=>{fetchGet({url:a.url.ajaxUpdate}).then(i=>{r.DataTable().clear().rows.add(i).draw();let s=0,o=0,m=0;i.forEach(t=>{s++,t.active_campaign===a.translation.no&&t.remaining_time_in_seconds<=a.upcomingTimerThreshold&&o++,t.active_campaign===a.translation.yes&&m++}),t.html(s),e.html(o),n.html(m)}).catch(a=>{console.error('Error updating campaign data:',a)})},3e4),setInterval(()=>{r.DataTable().rows().every(a=>{const t=r.DataTable().row(a).data(),e=i(t.remaining_time_in_seconds);t.remaining_time_in_seconds=e.remainingTimeInSeconds,t.remaining_time=e.countdown,r.DataTable().row(a).data(t)})},1e3)});
//# sourceMappingURL=aa-sov-timer.min.js.map