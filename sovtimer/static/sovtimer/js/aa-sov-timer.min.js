$(document).ready(()=>{let m=sovtimerJsSettingsDefaults;"undefined"!=typeof sovtimerJsSettingsOverride&&(m=objectDeepMerge(sovtimerJsSettingsDefaults,sovtimerJsSettingsOverride));const l=$(".aa-sovtimer-campaigns-total"),d=$(".aa-sovtimer-campaigns-upcoming"),c=$(".aa-sovtimer-campaigns-active"),n=a=>{let t="",e="aa-sovtimer-remaining";a<0?(e+=" aa-sovtimer-timer-elapsed",t="-",a=Math.abs(a),a++):a--;const n=Math.floor(a/86400);let i=Math.floor(a/3600)%24,r=Math.floor(a/60)%60,s=Math.floor(a)%60;return i<10&&(i="0"+i),r<10&&(r="0"+r),s<10&&(s="0"+s),{countdown:`<span class="${e}">${t}${n}d ${i}h ${r}m ${s}s</span>`,remainingTimeInSeconds:t+a}},r=$(".aa-sovtimer-campaigns");fetchGet({url:m.url.ajaxUpdate}).then(a=>{a&&r.DataTable({language:m.dataTables.language,data:a,columns:[{data:"event_type"},{data:"solar_system_name_html"},{data:"constellation_name_html"},{data:"region_name_html"},{data:"defender_name_html"},{data:"adm"},{data:"start_time",render:{_:a=>null===a?"":moment(a).utc().format(m.datetimeFormat.datetimeLong),sort:a=>null===a?"":a}},{data:"remaining_time"},{data:"campaign_progress"},{data:"remaining_time_in_seconds"},{data:"solar_system_name"},{data:"constellation_name"},{data:"region_name"},{data:"defender_name"},{data:"active_campaign"}],columnDefs:[{visible:!1,targets:[0,9,10,11,12,13,14]},{width:"150px",targets:[8]}],order:[[6,"asc"]],filterDropDown:{columns:[{idx:10,title:m.translation.dtFilter.system},{idx:11,title:m.translation.dtFilter.constellation},{idx:12,title:m.translation.dtFilter.region},{idx:13,title:m.translation.dtFilter.owner},{idx:14,title:m.translation.dtFilter.activeCampaign}],autoSize:!1,bootstrap:!0,bootstrap_version:5},createdRow:(a,t)=>{const e=l.html(),n=parseInt(e)+1;if(l.html(n),t.active_campaign===m.translation.no&&t.remaining_time_in_seconds<=m.upcomingTimerThreshold){$(a).addClass("aa-sovtimer-upcoming-campaign");const i=d.html(),r=parseInt(i)+1;d.html(r)}if(t.active_campaign===m.translation.yes){$(a).addClass("aa-sovtimer-active-campaign");const s=c.html(),o=parseInt(s)+1;c.html(o)}},paging:!1})}).catch(a=>{console.error("Error fetching campaign data:",a)}),setInterval(()=>{fetchGet({url:m.url.ajaxUpdate}).then(a=>{const t=r.DataTable();t.clear().rows.add(a).draw();let e=0,n=0,i=0;a.forEach(a=>{e++,a.active_campaign===m.translation.no&&a.remaining_time_in_seconds<=m.upcomingTimerThreshold&&n++,a.active_campaign===m.translation.yes&&i++}),l.html(e),d.html(n),c.html(i)}).catch(a=>{console.error("Error updating campaign data:",a)})},3e4),setInterval(()=>{r.DataTable().rows().every(a=>{const t=r.DataTable().row(a).data(),e=n(t.remaining_time_in_seconds);t.remaining_time_in_seconds=e.remainingTimeInSeconds,t.remaining_time=e.countdown,r.DataTable().row(a).data(t)})},1e3)});
//# sourceMappingURL=aa-sov-timer.min.js.map