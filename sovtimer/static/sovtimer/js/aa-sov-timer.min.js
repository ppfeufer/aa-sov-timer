$(document).ready(()=>{"use strict";const r=$(".aa-sovtimer-timers-total"),l=$(".aa-sovtimer-timers-upcoming"),c=$(".aa-sovtimer-timers-active"),e=t=>{let a="",e="aa-sovtimer-remaining";t<0?(e+=" aa-sovtimer-timer-elapsed",a="-",t=Math.abs(t),t++):t--;const n=Math.floor(t/86400);let i=Math.floor(t/3600)%24,s=Math.floor(t/60)%60,m=Math.floor(t)%60;return i<10&&(i="0"+i),s<10&&(s="0"+s),m<10&&(m="0"+m),{countdown:`<span class="${e}">${a}${n}d ${i}h ${s}m ${m}s</span>`,remainingTimeInSeconds:a+t}},n=$(".aa-sovtimer-campaigns").DataTable({ajax:{url:aaSovtimerSettings.url.ajaxUpdate,dataSrc:"",cache:!1},columns:[{data:"event_type"},{data:"solar_system_name_html"},{data:"constellation_name_html"},{data:"region_name_html"},{data:"defender_name_html"},{data:"adm"},{data:"start_time",render:t=>moment(t).utc().format(aaSovtimerSettings.dateformat)},{data:"remaining_time"},{data:"campaign_progress"},{data:"remaining_time_in_seconds"},{data:"solar_system_name"},{data:"constellation_name"},{data:"region_name"},{data:"defender_name"},{data:"active_campaign"}],columnDefs:[{visible:!1,targets:[9,10,11,12,13,14]},{width:"150px",targets:[8]}],order:[[6,"asc"]],filterDropDown:{columns:[{idx:0},{idx:10,title:aaSovtimerSettings.translations.system},{idx:11,title:aaSovtimerSettings.translations.constellation},{idx:12,title:aaSovtimerSettings.translations.region},{idx:13,title:aaSovtimerSettings.translations.owner},{idx:14,title:aaSovtimerSettings.translations.activeCampaign}],autoSize:!1,bootstrap:!0,bootstrap_version:5},createdRow:(t,a)=>{const e=r.html(),n=parseInt(e)+1;if(r.html(n),a.active_campaign===aaSovtimerSettings.translations.no&&a.remaining_time_in_seconds<=14400){$(t).addClass("aa-sovtimer-upcoming-campaign");const i=l.html(),s=parseInt(i)+1;l.html(s)}if(a.active_campaign===aaSovtimerSettings.translations.yes){$(t).addClass("aa-sovtimer-active-campaign");const m=c.html(),o=parseInt(m)+1;c.html(o)}},paging:!1});setInterval(()=>{n.ajax.reload(t=>{r.html("0"),l.html("0"),c.html("0"),$.each(t,(t,a)=>{const e=r.html(),n=parseInt(e)+1;if(r.html(n),a.active_campaign===aaSovtimerSettings.translations.no&&a.remaining_time_in_seconds<=14400){const i=l.html(),s=parseInt(i)+1;l.html(s)}if(a.active_campaign===aaSovtimerSettings.translations.yes){const m=c.html(),o=parseInt(m)+1;c.html(o)}})})},3e4),setInterval(()=>{n.rows().every(function(){const t=this.data(),a=e(t.remaining_time_in_seconds);t.remaining_time_in_seconds=a.remainingTimeInSeconds,t.remaining_time=a.countdown,n.row(this).data(t)})},1e3)});
//# sourceMappingURL=aa-sov-timer.min.js.map