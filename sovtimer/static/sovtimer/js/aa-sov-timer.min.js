$(document).ready(()=>{function n(t){return t&&"object"==typeof t&&!Array.isArray(t)&&!(t instanceof Date)}function i(e,...t){return t.length&&t.forEach(t=>{if(n(e)&&n(t))for(var a in t)n(t[a])?"__proto__"!==a&&"constructor"!==a&&"prototype"!==a&&(e[a]&&n(e[a])||(e[a]={}),i(e[a],t[a])):e[a]=t[a]}),e}let m=sovtimerJsSettingsDefaults;"undefined"!=typeof sovtimerJsSettingsOverride&&(m=i(sovtimerJsSettingsDefaults,sovtimerJsSettingsOverride));const l=$(".aa-sovtimer-timers-total"),c=$(".aa-sovtimer-timers-upcoming"),d=$(".aa-sovtimer-timers-active"),e=t=>{let a="",e="aa-sovtimer-remaining";t<0?(e+=" aa-sovtimer-timer-elapsed",a="-",t=Math.abs(t),t++):t--;const n=Math.floor(t/86400);let i=Math.floor(t/3600)%24,s=Math.floor(t/60)%60,o=Math.floor(t)%60;return i<10&&(i="0"+i),s<10&&(s="0"+s),o<10&&(o="0"+o),{countdown:`<span class="${e}">${a}${n}d ${i}h ${s}m ${o}s</span>`,remainingTimeInSeconds:a+t}},s=$(".aa-sovtimer-campaigns").DataTable({language:m.dataTables.translation,ajax:{url:m.url.ajaxUpdate,dataSrc:"",cache:!1},columns:[{data:"event_type"},{data:"solar_system_name_html"},{data:"constellation_name_html"},{data:"region_name_html"},{data:"defender_name_html"},{data:"adm"},{data:"start_time",render:t=>moment(t).utc().format(m.dateformat)},{data:"remaining_time"},{data:"campaign_progress"},{data:"remaining_time_in_seconds"},{data:"solar_system_name"},{data:"constellation_name"},{data:"region_name"},{data:"defender_name"},{data:"active_campaign"}],columnDefs:[{visible:!1,targets:[9,10,11,12,13,14]}],order:[[6,"asc"]],filterDropDown:{columns:[{idx:0,title:m.translations.type},{idx:10,title:m.translations.system},{idx:11,title:m.translations.constellation},{idx:12,title:m.translations.region},{idx:13,title:m.translations.owner},{idx:14,title:m.translations.activeCampaign}],autoSize:!1,bootstrap:!0,bootstrap_version:5},createdRow:(t,a)=>{const e=l.html(),n=parseInt(e)+1;if(l.html(n),a.active_campaign===m.translations.no&&a.remaining_time_in_seconds<=14400){$(t).addClass("aa-sovtimer-upcoming-campaign");const i=c.html(),s=parseInt(i)+1;c.html(s)}if(a.active_campaign===m.translations.yes){$(t).addClass("aa-sovtimer-active-campaign");const o=d.html(),r=parseInt(o)+1;d.html(r)}},paging:!1});setInterval(()=>{s.ajax.reload(t=>{l.html("0"),c.html("0"),d.html("0"),$.each(t,(t,a)=>{const e=l.html(),n=parseInt(e)+1;if(l.html(n),a.active_campaign===m.translations.no&&a.remaining_time_in_seconds<=14400){const i=c.html(),s=parseInt(i)+1;c.html(s)}if(a.active_campaign===m.translations.yes){const o=d.html(),r=parseInt(o)+1;d.html(r)}})})},3e4),setInterval(()=>{s.rows().every(function(){const t=this.data(),a=e(t.remaining_time_in_seconds);t.remaining_time_in_seconds=a.remainingTimeInSeconds,t.remaining_time=a.countdown,s.row(this).data(t)})},1e3)});
//# sourceMappingURL=aa-sov-timer.min.js.map